<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../../img/favicon.ico" />
    <title>Basic Example - AO Physics (AOP)</title>
    <link rel="stylesheet" href="../../css/theme.css" />
    <link rel="stylesheet" href="../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Basic Example";
        var mkdocs_page_input_path = "examples/basic.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../.." class="icon icon-home"> AO Physics (AOP)
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../..">Overview</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Getting Started</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../setup/">Setup</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Classes</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../world/">World</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../body/">Body</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../constraint/">Constraint</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../character/">Character</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Examples</span></p>
              <ul class="current">
                  <li class="toctree-l1 current"><a class="reference internal current" href="#">Basic Example</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#code-overview">Code Overview</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#step-by-step-breakdown">Step-by-Step Breakdown</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#notes">Notes</a>
    </li>
    </ul>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Other</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../lua_module/">Lua Module</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../..">AO Physics (AOP)</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../.." class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">Examples</li>
      <li class="breadcrumb-item active">Basic Example</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="basic-example">Basic Example</h1>
<p>This example demonstrates how to create and manage a simple simulation using AO Physics in Lua. The script sets up a world, creates multiple physical bodies with different properties and interactions, and then runs a simulation for a specified number of frames.</p>
<h2 id="code-overview"><strong>Code Overview</strong></h2>
<pre><code class="language-lua">-- Load the AO Physics library
AOP = require(&quot;AOP&quot;)

-- Define the number of simulation frames and the time step for each frame
local framesToSimulate = 1000
local deltaTime = 1.0 / 60.0

--- Create a World ---
-- Initialize a new world and create it
local world = AOP:World()
world:Create()

--- Create a Floor ---
-- Create a static floor body with a large size to act as the ground
local floor = AOP:Body()
floor.shape = &quot;Box&quot; -- Shape of the body
floor.size = { 100.0, 1.0, 100.0 } -- Size of the box (length, width, height)
floor.motionType = &quot;Static&quot; -- The body does not move
floor.layer = &quot;NON_MOVING&quot; -- Layer for static objects
floor.activate = false -- Do not activate this body initially
floor:Add() -- Add the body to the world

-- Create a dynamic sphere body and set its initial linear velocity
local sphere = AOP:Body()
sphere.shape = &quot;Sphere&quot; -- Shape of the body
sphere.radius = 0.5 -- Radius of the sphere
sphere.position = { -3.0, 1, 0.0 } -- Initial position of the sphere (x, y, z)
sphere:Add() -- Add the body to the world
sphere:SetLinearVelocity({ 0.0, 0.0, 5.0 }) -- Set the initial linear velocity

-- Create another dynamic sphere body and apply a force
local sphere2 = AOP:Body()
sphere2.shape = &quot;Sphere&quot; -- Shape of the body
sphere2.radius = 0.5 -- Radius of the sphere
sphere2.position = { -1.0, 1, 0.0 } -- Initial position of the sphere
sphere2:Add() -- Add the body to the world
sphere2:AddForce({ 0.0, 0.0, 100000.0 }) -- Apply a force to the sphere

-- Create a third dynamic sphere body and apply an impulse
local sphere3 = AOP:Body()
sphere3.shape = &quot;Sphere&quot; -- Shape of the body
sphere3.radius = 0.5 -- Radius of the sphere
sphere3.position = { 1.0, 1, 0.0 } -- Initial position of the sphere
sphere3:Add() -- Add the body to the world
sphere3:AddImpulse({ 0.0, 0.0, 1500.0 }) -- Apply an impulse to the sphere

-- Create a fourth dynamic sphere body and apply torque
local sphere4 = AOP:Body()
sphere4.shape = &quot;Sphere&quot; -- Shape of the body
sphere4.radius = 0.5 -- Radius of the sphere
sphere4.position = { 3.0, 1, 0.0 } -- Initial position of the sphere
sphere4:Add() -- Add the body to the world
sphere4:AddTorque({ 50000.0, 0.0, 0 }) -- Apply torque to the sphere

--- Update the World ---
-- Simulate the world for the specified number of frames
for i = 1, framesToSimulate do
    world:Update(1, deltaTime) -- Update the world with a single step
    world:GetState() -- Get the current state of the world
end

--- Get World States ---
-- Print the states of the world after simulation
print(world:GetStates())

--- Destroy the World ---
-- Clean up and destroy the world to free resources
world:Destroy()

-- Return
return &quot;&quot;
</code></pre>
<h2 id="step-by-step-breakdown"><strong>Step-by-Step Breakdown</strong></h2>
<p>Load the AO Physics Library:</p>
<pre><code class="language-lua">AOP = require(&quot;AOP&quot;)
</code></pre>
<p>Define Simulation Parameters:</p>
<pre><code class="language-lua">local framesToSimulate = 1000
local deltaTime = 1.0 / 60.0
</code></pre>
<p>Create a World:</p>
<pre><code class="language-lua">local world = AOP:World()
world:Create()
</code></pre>
<p>Create a Static Floor:</p>
<pre><code class="language-lua">-- Create a static floor body with a large size to act as the ground
local floor = AOP:Body() -- Create a new body object
floor.shape = &quot;Box&quot; -- Set the shape of the body to a box
floor.size = { 100.0, 1.0, 100.0 } -- Set the size of the box (length, width, height)
floor.motionType = &quot;Static&quot; -- Set the motion type of the body to static (does not move)
floor.layer = &quot;NON_MOVING&quot; -- Set the layer of the body to NON_MOVING
floor.activate = false -- Set the activation state of the body to false (do not activate initially)
floor:Add() -- Add the body to the world
</code></pre>
<p>Create and Configure Multiple Spheres:</p>
<pre><code class="language-lua">local sphere = AOP:Body() -- Create a new body object
sphere.shape = &quot;Sphere&quot; -- Set the shape of the body to a sphere
sphere.radius = 0.5 -- Set the radius of the sphere
sphere.position = { -3.0, 1, 0.0 } -- Set the initial position of the sphere (x, y, z)
sphere:Add() -- Add the body to the world
sphere:SetLinearVelocity({ 0.0, 0.0, 5.0 }) -- Set the initial linear velocity of the sphere

local sphere2 = AOP:Body() -- Create a new body object for sphere2
sphere2.shape = &quot;Sphere&quot; -- Set the shape of sphere2 to a sphere
sphere2.radius = 0.5 -- Set the radius of sphere2 to 0.5
sphere2.position = { -1.0, 1, 0.0 } -- Set the initial position of sphere2 to (-1.0, 1, 0.0)
sphere2:Add() -- Add sphere2 to the world
sphere2:AddForce({ 0.0, 0.0, 100000.0 }) -- Apply a force of (0.0, 0.0, 100000.0) to sphere2

local sphere3 = AOP:Body() -- Create a new body object for sphere3
sphere3.shape = &quot;Sphere&quot; -- Set the shape of sphere3 to a sphere
sphere3.radius = 0.5 -- Set the radius of sphere3 to 0.5
sphere3.position = { 1.0, 1, 0.0 } -- Set the initial position of sphere3 to (1.0, 1, 0.0)
sphere3:Add() -- Add sphere3 to the world
sphere3:AddImpulse({ 0.0, 0.0, 1500.0 }) -- Apply an impulse of (0.0, 0.0, 1500.0) to sphere3

local sphere4 = AOP:Body() -- Create a new body object for sphere4
sphere4.shape = &quot;Sphere&quot; -- Set the shape of sphere4 to a sphere
sphere4.radius = 0.5 -- Set the radius of sphere4 to 0.5
sphere4.position = { 3.0, 1, 0.0 } -- Set the initial position of sphere4 to (3.0, 1, 0.0)
sphere4:Add() -- Add sphere4 to the world
sphere4:AddTorque({ 50000.0, 0.0, 0 }) -- Apply a torque of (50000.0, 0.0, 0) to sphere4
</code></pre>
<p>Run the Simulation:</p>
<pre><code class="language-lua">for i = 1, framesToSimulate do
    world:Update(1, deltaTime) -- Update the world with a single step
    world:GetState() -- Get the current state of the world
end
</code></pre>
<p>Output World States and Clean Up:</p>
<pre><code class="language-lua">-- Print the states of the world after simulation
print(world:GetStates())

-- Clean up and destroy the world to free resources
world:Destroy()
</code></pre>
<h2 id="notes">Notes</h2>
<ul>
<li>This script initializes a world and several physical bodies with different properties and forces.</li>
<li>It simulates the world for 1000 frames, printing the world state after each frame.</li>
<li>The simulation environment is destroyed at the end to clean up resources.</li>
</ul>
<p>For more details on the AO Physics library and its components, please refer to the <a href="https://peterfarber.github.io/AO-Physics/">AO Physics Documentation</a>.</p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../../character/" class="btn btn-neutral float-left" title="Character"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../../lua_module/" class="btn btn-neutral float-right" title="Lua Module">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../../character/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../../lua_module/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "../..";</script>
    <script src="../../js/theme_extra.js"></script>
    <script src="../../js/theme.js"></script>
      <script src="../../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
